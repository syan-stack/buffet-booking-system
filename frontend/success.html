<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tempahan Berjaya</title>
</head>

<body style="font-family: Arial; text-align:center; padding:40px;">

  <h1>TEMPAHAN BERJAYA</h1>
  <p><strong>SILA SCREENSHOT SEBAGAI BUKTI</strong></p>

  <p>Nama: <span id="name">-</span></p>
  <p>ID Tempahan: <span id="bookingId">-</span></p>
  <p>Tarikh: <span id="date">-</span></p>
  <p>Status: <span style="color:green;">PAID</span></p>

<script>
const API_BASE = "https://api.kopitenggeklarkin.com";

const params = new URLSearchParams(window.location.search);
const bookingId = params.get("booking_id");

if (!bookingId) {
  document.body.innerHTML = "<h2>Booking ID tidak dijumpai.</h2>";
} else {
  fetch(`${API_BASE}/api/bookings/${bookingId}`)
    .then(res => res.json())
    .then(data => {
      document.getElementById("name").textContent =
        data.customer_name;

      document.getElementById("bookingId").textContent =
        data.id;

      document.getElementById("date").textContent =
        data.booking_date.split("T")[0];
    })
    .catch(err => {
      document.body.innerHTML =
        "<h2>Tempahan berjaya tetapi gagal papar maklumat.</h2>";
    });
}
</script>

</body>
</html>